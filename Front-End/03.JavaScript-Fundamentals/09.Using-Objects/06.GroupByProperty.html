<script>
    // PLEASE CHECK THE OUTPUT IN THE BROWSER CONSOLE (F12).
    
    // Write a function that groups an array of persons by age, first or last name.
    // The function must return an associative array, with keys - the groups, and values -arrays with persons in this groups.

    var persons;

    function makePerson(fname, lname, age) {
        return {
            fname: fname,
            lname: lname,
            age: age,
            toString: function () {return this.fname + ' ' + this.lname + ', ' + this.age; }
        };
    }

    function groupByProperty(persons, prop) {
        var group = {};
        var key;

        persons.forEach(function(person) {
            key = person[prop];
            // Create new empty array if the key does not exist
            group[key] = group[key] || [];            
            group[key].push(person);
        });

        return group;   
    }

    persons = [
        makePerson('Bay', 'Ivan', 81),
        makePerson('Marry', 'Poppins', 25),
        makePerson('Gosho', 'Petrov', 25),
        makePerson('Bay', 'Pesho', 35)
    ];

    console.log(persons.join(" | "));
    
    var groupedByFname = groupByProperty(persons, 'fname');
    var groupedByAge = groupByProperty(persons, 'age');
    
    console.log("groupedByFname['Bay'] = " + groupedByFname['Bay'].join(" | "));
    console.log("groupedByAge[25] = " + groupedByAge[25].join(" | "));
</script>