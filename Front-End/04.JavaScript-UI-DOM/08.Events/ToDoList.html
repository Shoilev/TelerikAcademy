<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>ToDo List</title>
</head>

<body>
    <script>
        (function () {
            var textArea = document.createElement('textarea');
            document.body.appendChild(textArea);

            var buttonAdd = document.createElement('button');
            buttonAdd.innerHTML = 'Add';
            buttonAdd.addEventListener('click', addItem);
            document.body.appendChild(buttonAdd);

            var buttonHide = document.createElement('button');
            buttonHide.innerHTML = 'Hide/Show All';
            buttonHide.addEventListener('click', toggleHideShowAll);
            document.body.appendChild(buttonHide);

            var buttonDelete = document.createElement('button');
            buttonDelete.innerHTML = 'Delete';
            buttonDelete.addEventListener('click', onclickDelete);
            document.body.appendChild(buttonDelete);

            var taskList = document.createElement('ul');
            document.body.appendChild(taskList);

            function addItem(evt) {
                var taskName = textArea.value;

                var task = document.createElement('li');
                task.style.listStyleType = 'none';
                task.addEventListener('click', onclickTask);

                var label = document.createElement('label');
                label.innerHTML = '<input type="checkbox" />' + taskName;

                task.appendChild(label);
                taskList.appendChild(task);
            }

            function toggleHideShowAll() {
                if (taskList.style.display === 'none')
                    taskList.style.display = '';
                else
                    taskList.style.display = 'none'
            }

            function onclickTask(evt) {
                var label = this.firstChild;
                var checkbox = label.firstChild;
                if (checkbox.checked)
                    label.style.textDecoration = "line-through";
                else
                    label.style.textDecoration = "";
            }

            function onclickDelete(evt) {
                for (var i = 0, len = taskList.children.length; i < len; i++) {
                    var listItem = taskList.children[i];
                    var checkBox = listItem.firstChild.firstChild;
                    if (checkBox.checked) {
                        taskList.removeChild(listItem);
                        i--;
                        len--;
                    }
                }
            }
        })();
    </script>
</body>

</html>