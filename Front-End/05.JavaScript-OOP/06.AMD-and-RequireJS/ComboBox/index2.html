<!DOCTYPE html>
<html>

<head>
    <title>ComboBox</title>
    <style>
        li {
            list-style-type: none;
            width: 100px;
            text-align: center;
            border: 1px solid yellowgreen;
        }
        .selected {
            color: red;
        }
    </style>
    <script src="scripts/libs/jquery-2.1.1.min.js"></script>
    <script src="scripts/libs/handlebars-v1.3.0.js"></script>
</head>

<body>
    <div id="container"></div>
    <script id="template" type="text/x-handlebars-template">
        <div class="person-item" id="person-item-{{id}}">
            <strong class="person-name">{{name}}</strong><p class="person-age">{{age}}</p>
            <img src="{{src}}" width="100px" />
        </div>
    </script>
    <script>
        var controls = (function () {

           var ComboBox = function (items, templateHtml) {
                
                var template = Handlebars.compile(templateHtml);
                
                var $container = $("#container"),
                    $ul = $('<ul/>'),
                    $li = $('<li/>'),
                    $allLiElements;
               
                $container.addClass('dropdown-list-container');
                $ul.addClass('dropdown-list-options');
                $li.addClass('dropdown-list-option');

                for (var i = 0; i < items.length; i++) {
                    $li.attr('data-value', i);
                    $li.html(template(items[i]));
                    $ul.append($li.clone(true));
                }

                $ul.appendTo($container);
                $allLiElements = $ul.find('.dropdown-list-option');
                $allLiElements.hide().first().show();

                $container.on('click', 'li', function () {
                    var $clickedLi = $(this);
                    $clickedLi.parent().find('.selected').removeClass('selected');
                    $clickedLi.addClass('selected');
                    $allLiElements.toggle();
                    $clickedLi.show();
                    var optionIndex = parseInt($clickedLi.attr('data-value'));
                });
            }
           
           return {
               ComboBox: ComboBox
           }
        }());
        
        var items = [
                { id: 1, name: "Argentina", age: 18, src: "http://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Flag_of_Argentina.svg/200px-Flag_of_Argentina.svg.png" }, 
                { id: 2, name: "Brazil", age: 19, src: "http://upload.wikimedia.org/wikipedia/en/thumb/0/05/Flag_of_Brazil.svg/200px-Flag_of_Brazil.svg.png" },
                { id: 3, name: "Germany", age: 19, src: "http://upload.wikimedia.org/wikipedia/en/thumb/b/ba/Flag_of_Germany.svg/200px-Flag_of_Germany.svg.png" }
            ];
        
        var template = $("#template").html();
        var comboBox = controls.ComboBox(items, template);
        
        //var comboBoxHtml = comboBox.render(template);
        //container.innerHTML = comboBoxHtml;
    </script>
</body>

</html>